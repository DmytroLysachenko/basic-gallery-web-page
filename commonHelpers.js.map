{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export { fetchSearch };\nimport axios from 'axios';\nconst API = '43312748-d2770da7ff63c643db495a6a3';\n\nconst fetchSearch = async (imageName, page) => {\n  try {\n    const result = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: API,\n        q: imageName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n    console.log(result);\n    return result.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n","export { initalRender, renderGallery };\n\nconst initalRender = () => {\n  const form = document.createElement('form');\n  form.classList.add('search-form');\n  const input = document.createElement('input');\n  input.type = 'text';\n  input.classList.add('search-input');\n  input.placeholder = 'Search images...';\n  const button = document.createElement('button');\n  button.type = 'submit';\n  button.classList.add('search-button');\n  button.textContent = 'Search';\n  const list = document.createElement('ul');\n  list.classList.add('gallery-list');\n  form.append(input, button);\n  document.body.append(form, list);\n};\n\nconst renderGallery = imagesGallery => {\n  const result = imagesGallery.map(img => {\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n\n    const link = document.createElement('a');\n    link.classList.add('gallery-link');\n    link.href = img.largeImageURL;\n\n    const image = document.createElement('img');\n    image.classList.add('gallery-image');\n    image.src = img.webformatURL;\n    image.alt = img.tags;\n    image.width = '360';\n\n    const descItems = {\n      Likes: img.likes,\n      Views: img.views,\n      Comments: img.comments,\n      Downloads: img.downloads,\n    };\n\n    const descList = document.createElement('ul');\n    descList.classList.add('gallery-desc-list');\n    for (let item in descItems) {\n      const descItem = document.createElement('li');\n      descItem.classList.add('gallery-desc-item');\n\n      const descTtl = document.createElement('p');\n      descTtl.classList.add('gallery-desc-ttl');\n      descTtl.textContent = item;\n\n      const descText = document.createElement('p');\n      descText.classList.add('gallery-desc-text');\n      descText.textContent = descItems[item];\n\n      descItem.append(descTtl, descText);\n      descList.append(descItem);\n    }\n\n    link.append(image);\n    item.append(link, descList);\n    return item;\n  });\n  return result;\n};\n\nexport const nextButton = () => {\n  const button = document.createElement('button');\n  button.textContent = 'Load more';\n  button.classList.add('search-button');\n  button.classList.add('next-button');\n  button.type = 'button';\n  return button;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchSearch } from './js/pixabay-api';\nimport { initalRender, nextButton, renderGallery } from './js/render-functions';\ninitalRender();\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst list = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nlet page;\nlet total;\nform.addEventListener('submit', event => {\n  if (input.value.trim() === '') {\n    iziToast.show({\n      title: 'Error',\n      message: 'Invalid value',\n      backgroundColor: 'red',\n      theme: 'dark',\n      color: 'red',\n      position: 'topRight',\n    });\n  }\n  loader.classList.add('is-loading');\n  event.preventDefault();\n  const imageName = input.value.trim();\n  list.innerHTML = '';\n  input.value = '';\n  handleSubmit(imageName);\n});\n\nlist.addEventListener('click', event => {\n  event.preventDefault();\n});\n\nconst handleSubmit = async imageName => {\n  try {\n    page = 1;\n    const { hits, totalHits } = await fetchSearch(imageName, page);\n    total = totalHits;\n    console.log(hits);\n    if (hits.length === 0) {\n      iziToast.show({\n        title: 'Error',\n        message: 'Unfortunately no pictures found by your request :(',\n        backgroundColor: 'red',\n        theme: 'dark',\n        color: 'red',\n        position: 'topRight',\n      });\n      loader.classList.remove('is-loading');\n      return;\n    }\n    const gallery = renderGallery(hits);\n    list.append(...gallery);\n    loader.classList.remove('is-loading');\n    const lightbox = new SimpleLightbox('.gallery-link', {\n      captionDelay: 250,\n      captionsData: 'alt',\n    });\n    lightbox.refresh();\n\n    if (total / 15 > 1) {\n      const button = nextButton();\n\n      list.after(button);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nbutton.addEventListener('click', async event => {\n  console.log(page);\n  page += 1;\n  const { hits } = await fetchSearch(imageName, page);\n  const gallery = renderGallery(hits);\n  list.append(...gallery);\n});\n"],"names":["API","fetchSearch","imageName","page","result","axios","error","initalRender","form","input","button","list","renderGallery","imagesGallery","img","item","link","image","descItems","descList","descItem","descTtl","descText","nextButton","loader","total","event","iziToast","handleSubmit","hits","totalHits","gallery","SimpleLightbox"],"mappings":"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"}